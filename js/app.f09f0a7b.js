(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],f=0,p=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/flats/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app",attrs:{id:"app"}},[r("header",{staticClass:"header"}),r("main",{staticClass:"main"},t._l(t.flatsArray,(function(e,a){return r("flat-component",{key:e.id,attrs:{flat:e},on:{"toggle-like":function(e){return t.toggleLikeOnFlat(a)}}})})),1),t._m(0)])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"footer"},[r("a",{staticClass:"link",attrs:{href:"https://github.com/ufaboy/flats"}},[t._v("Ссылка на проект")])])}],s=r("b85c"),o=r("1da1"),c=r("5530"),l=(r("96cf"),r("d3b7"),{response:[{type:"flat",id:1,attributes:{title:"3-х комнатная на Минской",rooms:3,address:{city:"Tyumen",street:"Минская",house:"3a",room:"123"},area:134,unit:"квм",img:"./img/flat_1.png"},relationships:{type:"agent",id:2,attributes:{first_name:"Василий",last_name:"Дроздов",middle_name:"Михайлович"}}},{type:"flat",id:2,attributes:{title:"1 комнатная на Барабаинской",rooms:2,address:{city:"Tyumen",street:"Барабинская",house:"12",room:"45"},area:34,unit:"квм",img:"./img/flat_2.png"},relationships:{type:"agent",id:10,attributes:{first_name:"Михаил",last_name:"Иванов",middle_name:"Демидович"}}},{type:"flat",id:3,attributes:{title:"Квартира Ленина",rooms:4,address:{city:"Tyumen",street:"Ленина",house:"134",room:"24"},area:134,unit:"квм",img:"./img/flat_3.png"},relationships:{type:"agent",id:44,attributes:{first_name:"Степан",last_name:"Карачаев",middle_name:"Иванович"}}}]});function u(t){return f.apply(this,arguments)}function f(){return f=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,300)}));case 2:return t.abrupt("return",l);case 3:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}var p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flat-wrapper"},[r("div",{staticClass:"flat"},[r("div",{staticClass:"img-wrapper"},[r("img",{staticClass:"flat__img",attrs:{src:t.calcImgUrl(),alt:"Фото квартиры",onerror:"this.src ='./img/default-flat.png'"}}),r("icon-like",{staticClass:"icon icon-like",attrs:{size:36,color:t.iconLikeColor},nativeOn:{click:function(e){return t.toggleLike.apply(null,arguments)}}})],1),r("div",{staticClass:"info"},[r("h4",{staticClass:"title"},[t._v(t._s(t.flat.attributes.title))]),r("div",{staticClass:"square"},[t._v("Площадь: "+t._s(t.flat.attributes.area)+" "+t._s(t.flat.attributes.unit))]),r("div",{staticClass:"rooms"},[t._v("Комнат: "+t._s(t.flat.attributes.rooms?t.flat.attributes.rooms:"Не указано"))]),r("div",{staticClass:"address"},[t._v("Адрес: "+t._s(t.calcAddress()))]),r("div",{staticClass:"persons"},[r("p",[t._v(t._s(t.calcPerson(t.flat.relationships)))])])])])])},d=[],m=(r("0481"),r("99af"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{attrs:{width:t.size,height:t.size,fill:t.color,viewBox:"0 0 64 64"}},[r("g",[r("g",[r("circle",{attrs:{cx:"32",cy:"32",fill:"#FFFFFF",r:"32"}})]),r("g",{attrs:{opacity:"0.2"}},[r("g",[r("path",{attrs:{d:"M49.982,31.003c-0.094-5.522-4.574-10.442-10.107-10.442c-3.2,0-6.019,1.674-7.875,4.131     c-1.856-2.457-4.676-4.131-7.875-4.131c-5.533,0-10.012,4.921-10.107,10.442H14c0,0.034,0.007,0.065,0.007,0.099     c0,0.025-0.007,0.049-0.007,0.076c0,0.155,0.038,0.272,0.045,0.421c0.495,14.071,17.813,19.84,17.813,19.84     s17.572-5.762,18.092-19.818C49.959,31.464,50,31.34,50,31.178c0-0.027-0.007-0.052-0.007-0.076c0-0.036,0.007-0.065,0.007-0.099     H49.982z",fill:"#231F20"}})])]),r("g",[r("path",{attrs:{d:"M49.982,29.003c-0.094-5.522-4.574-10.442-10.107-10.442c-3.2,0-6.019,1.674-7.875,4.131     c-1.856-2.457-4.676-4.131-7.875-4.131c-5.533,0-10.012,4.921-10.107,10.442H14c0,0.034,0.007,0.065,0.007,0.099     c0,0.025-0.007,0.049-0.007,0.076c0,0.155,0.038,0.272,0.045,0.421c0.495,14.071,17.813,19.84,17.813,19.84     s17.572-5.762,18.092-19.818C49.959,29.464,50,29.34,50,29.178c0-0.027-0.007-0.052-0.007-0.076c0-0.036,0.007-0.065,0.007-0.099     H49.982z",fill:t.color}})])])])}),g=[],b=(r("a9e3"),{name:"IconLike",props:{size:{type:Number,default:24},color:{type:String,default:"#FF7979"}}}),h=b,v=r("2877"),y=Object(v["a"])(h,m,g,!1,null,null,null),_=y.exports,k={name:"FlatComponent",components:{IconLike:_},props:{flat:Object},data:function(){return{}},computed:{iconLikeColor:function(){return this.flat.attributes.like?"#FF7979":"#515151"}},watch:{},created:function(){},mounted:function(){},methods:{calcAddress:function(){var t,e;if(null!==(t=this.flat)&&void 0!==t&&null!==(e=t.attributes)&&void 0!==e&&e.address){var r=this.flat.attributes.address,a=r.city,n=r.street,i=r.house,s=r.room;return"".concat(a,", ").concat(n," ").concat(i,", кв ").concat(s||"Не указано")}return"Не указано"},calcImgUrl:function(){var t,e;return null!==(t=this.flat)&&void 0!==t&&null!==(e=t.attributes)&&void 0!==e&&e.img?this.flat.attributes.img:"./img/default-flat.png"},toggleLike:function(){this.$emit("toggle-like")},calcPerson:function(t){if(null!==t&&void 0!==t&&t.attributes){var e=t.attributes,r=e.first_name,a=e.last_name,n=e.middle_name;return"".concat("agent"===t.type?"Агент":t.type,": ").concat(a," ").concat(r," ").concat(n)}return"Не указано"}}},O=k,F=(r("9e91"),Object(v["a"])(O,p,d,!1,null,"0978345d",null)),w=F.exports,C=r("2f62"),j={name:"App",components:{FlatComponent:w},data:function(){return{}},computed:Object(c["a"])({},Object(C["b"])(["flatsArray"])),created:function(){this.loadData()},methods:{loadData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(r=e.sent,!r){e.next=7;break}return a=t.prepareFlatArray(r.response),e.next=7,t.$store.dispatch("setFlatsArray",a);case 7:case"end":return e.stop()}}),e)})))()},prepareFlatArray:function(t){var e,r=Object(s["a"])(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.attributes.like=!1}}catch(n){r.e(n)}finally{r.f()}return t},toggleLikeOnFlat:function(t){this.$store.dispatch("toggleLikeOnFlat",t)}}},x=j,A=(r("5c0b"),Object(v["a"])(x,n,i,!1,null,null,null)),L=A.exports;a["a"].use(C["a"]);var P=new C["a"].Store({state:{flatsArray:[]},mutations:{setFlatsArray:function(t,e){t.flatsArray=e},setLikeOnFlat:function(t,e){t.flatsArray[e].attributes.like=!0},setDisLikeOnFlat:function(t,e){t.flatsArray[e].attributes.like=!1}},actions:{setFlatsArray:function(t,e){var r=t.commit;r("setFlatsArray",e)},toggleLikeOnFlat:function(t,e){var r=t.commit,a=t.state,n=a.flatsArray[e];if(n&&n.attributes)switch(n.attributes.like){case!1:r("setLikeOnFlat",e);break;case!0:r("setDisLikeOnFlat",e);break}}},modules:{}});a["a"].config.productionTip=!1,new a["a"]({store:P,render:function(t){return t(L)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"80f4":function(t,e,r){},"9c0c":function(t,e,r){},"9e91":function(t,e,r){"use strict";r("80f4")}});
//# sourceMappingURL=app.f09f0a7b.js.map